(this.webpackJsonpsnake=this.webpackJsonpsnake||[]).push([[0],{20:function(e,t,a){e.exports=a(65)},25:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){e.exports=a.p+"static/media/loading.aaba0c03.svg"},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),l=a.n(c);a(25),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(3),i=a(8),s=a(1),u=(a(26),a(27),r.a.memo((function(e){var t=e.grid,a=e.showGridBorder;return r.a.createElement("table",{className:"board ".concat(!1===a?"borderless":"")},r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement("tr",{key:t},e.map((function(e,t){return r.a.createElement("td",{key:t,className:e},r.a.createElement("div",null,r.a.createElement("span",null)))})))}))))}))),m=(a(28),r.a.memo((function(e){function t(t){e.onClick(t),e.vibration&&window.navigator.vibrate(10)}return function(){var a=e.width<e.height?e.width:e.height+"px";return r.a.createElement("div",{className:"navpad"+(e.landscape?" landscape":""),style:{width:e.width+"px",height:e.height+"px"}},r.a.createElement("div",{className:"inner",style:{width:a,height:a}},r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{className:"up",onClick:function(){return t("up")}},r.a.createElement("span",null)),r.a.createElement("button",{className:"right",onClick:function(){return t("right")}},r.a.createElement("span",null)),r.a.createElement("button",{className:"left",onClick:function(){return t("left")}},r.a.createElement("span",null)),r.a.createElement("button",{className:"down",onClick:function(){return t("down")}},r.a.createElement("span",null)))))}()})));a(29);function d(e){return e.open&&r.a.createElement("div",{className:"modal-wrapper"},r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal-header"},e.header),r.a.createElement("div",{className:"modal-body"},e.children),r.a.createElement("div",{className:"modal-footer",onClick:e.onFooterClick},e.footer)))}a(30);var h=a(4),f=a.n(h),E=a(9),b=a.n(E);a(59),a(60);function v(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),c=(a[0],a[1],Object(n.useState)(!0)),l=Object(s.a)(c,2);l[0],l[1];return r.a.createElement(d,{open:!0,header:"TOP SCORERS",footer:r.a.createElement("div",{className:"d-flex"},e.onClose&&r.a.createElement("div",{className:"float-left w-100",onClick:e.onClose},"CLOSE"),e.onBack&&r.a.createElement("div",{className:"float-right w-100",onClick:e.onBack},"BACK"))})}function g(e){var t=Object(n.useRef)(f.a.get("record")||0),a=Object(n.useState)(!1),c=Object(s.a)(a,2),l=c[0],o=c[1];return Object(n.useEffect)((function(){e.score>t.current&&(f.a.set("record",e.score),o(!0),e.userName&&b.a.post("/.netlify/functions/create-top-scorer",{name:e.userName,score:e.score}).then((function(e){})).catch((function(e){console.error(e)})))}),[e.score,e.userName]),Object(n.useEffect)((function(){function t(t){32===t.keyCode&&e.playAgain()}return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[e]),r.a.createElement(d,{open:!0,header:"GAME OVER",footer:"PLAY AGAIN",onFooterClick:e.playAgain},r.a.createElement("div",{className:"game-over"},r.a.createElement("h3",null,"YOUR SCORE"),r.a.createElement("h1",null,e.score),l&&r.a.createElement("h4",null,r.a.createElement("p",null,"Congratulations!")," New record!")))}a(61);var p={settings:"Settings"},k={candySnake:{key:"candySnake",value:"Snake V2"},colorSnake:{key:"colorSnake",value:"Snake V2"},deSnaker:{key:"deSnaker",value:"DeSnaker"}};a(62);function w(e){var t=Object(n.useState)(e.userName||""),a=Object(s.a)(t,2),c=a[0],l=a[1];function i(){if(c)if(e.initialCheck){var t=Object(o.a)({},e.settings,{userName:c});f.a.set("settings",t),e.updateSettings(Object(o.a)({},t))}else e.updateUserName(c),e.onBack()}return r.a.createElement(d,{open:!0,header:"USERNAME",footer:e.initialCheck?r.a.createElement("div",{className:"",onClick:i},"LET'S PLAY"):r.a.createElement("div",null,r.a.createElement("div",{className:"float-right w-50",onClick:e.onBack},"BACK"),r.a.createElement("div",{className:"float-left w-50"+(c?"":" disabled"),onClick:i},"SAVE"))},r.a.createElement("div",{className:"username"},r.a.createElement("input",{type:"text",name:"userName",value:c,onChange:function(e){/^$|[a-zA-Z0-9-_]+$/.test(e.target.value)&&l(e.target.value)}}),r.a.createElement("legend",null,"This username will appear in top scorers if you can make it to the list")))}a(63);function y(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],l=a[1],i=Object(n.useState)(!1),u=Object(s.a)(i,2),m=u[0],h=u[1],E=Object(n.useState)({vibration:!1,showGridBorder:!0,theme:k.candySnake,userName:""}),b=Object(s.a)(E,2),v=b[0],g=b[1];function p(e){var t=e.target,a=t.name,n=t.value,r=t.checked,c=t.type,l=Object(o.a)({},v);"checkbox"===c?l[a]=r:"select-one"===c&&("theme"===a&&(n=k[n]),l[a]=n),g(l),h(!0)}function y(){f.a.set("settings",v),e.updateSettings(Object(o.a)({},v)),h(!1)}function N(e){g((function(t){return Object(o.a)({},t,{userName:e})})),h(!0)}return Object(n.useEffect)((function(){g((function(t){return Object(o.a)({},t,{},e.settings)}))}),[e.settings]),c?r.a.createElement(w,{onBack:function(){return l(!1)},userName:v.userName,updateUserName:N}):r.a.createElement(d,{open:!0,header:"SETTINGS",footer:r.a.createElement("div",null,r.a.createElement("div",{className:"float-right w-50",onClick:e.onBack},"BACK"),r.a.createElement("div",{className:"float-left w-50"+(m?"":" disabled"),onClick:y},"APPLY"))},r.a.createElement("div",{className:"settings"},r.a.createElement("ul",null,r.a.createElement("li",{className:"d-flex"},r.a.createElement("span",{className:"w-100 text-left"},"Theme"),r.a.createElement("select",{name:"theme",value:v.theme.key,onChange:p,className:"float-right"},Object.values(k).map((function(e){return r.a.createElement("option",{key:e.key,value:e.key},e.value)})))),r.a.createElement("li",{className:"d-flex"},r.a.createElement("span",{className:"w-100 text-left"},"Grid border"),r.a.createElement("span",null,r.a.createElement("label",{className:"checkbox"},r.a.createElement("input",{type:"checkbox",name:"showGridBorder",onChange:p,checked:v.showGridBorder}),r.a.createElement("span",{className:"checkmark"})))),r.a.createElement("li",{className:"d-flex"},r.a.createElement("span",{className:"w-100 text-left"},"Username"),r.a.createElement("span",{className:"w-100 text-right cursor-pointer",onClick:function(){return l(!0)}},v.userName||"Not set"))),r.a.createElement("h4",null,"Mobile"),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("span",null,"Vibration"),r.a.createElement("span",null,r.a.createElement("label",{className:"checkbox"},r.a.createElement("input",{type:"checkbox",name:"vibration",onChange:p,checked:v.vibration}),r.a.createElement("span",{className:"checkmark"})))))))}a(64);function N(e){return r.a.createElement(d,{open:!0,header:"TOP SCORERS",footer:r.a.createElement("div",null,r.a.createElement("div",{className:"float-right w-50",onClick:e.onBack},"BACK"),r.a.createElement("div",{className:"float-left w-50",onClick:e.onClose},"CLOSE"))},r.a.createElement("div",{className:"about"},r.a.createElement("h3",{className:"margin-top-0"},"Welcome to Candy Snake"),"Snake games are awesome, but they are all same... We wanted to build a little modernized one. In traditional snake games goal is to eat as much food as possible so that snake will be as long as possible. Despite of that in Candy Snake the goal is to eat wisely to stay shorter as longer snake means harder game due to less space. To achieve that player needs to eat food with the same type as much as possible. Eating 3 food with same type in a row will cause a burst effect. Burst effect won't only shorten the snake but will also triple the score got by eating 3 food lastly.",r.a.createElement("br",null),"Every type of food is different from score perspective. And remember, not every single food brings positive score ;) It is on you - the player to find out which food... Good news, burst effect will still bring positive score with food that has negative score.",r.a.createElement("br",null),"There is a limit on the number of food that will be lying on the board. To push the game to generate new food, player has to eat existing ones. It is good idea to be careful when doing so.",r.a.createElement("br",null),r.a.createElement("br",null)))}var O=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(null),i=Object(s.a)(o,2),u=i[0],m=i[1];function h(){m(null)}function f(){m(null),l(!1)}return r.a.createElement("div",{className:"menu-wrapper"},r.a.createElement("div",{className:"dots",onClick:function(){return l(!0)}},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)),c&&(u===p.settings?r.a.createElement(y,{settings:e.settings,updateSettings:e.updateSettings,onBack:function(){return m(null)}}):u===p.topScorers?r.a.createElement(v,{onBack:h,onClose:f,userName:e.settings.userName}):u===p.about?r.a.createElement(N,{onBack:h,onClose:f}):r.a.createElement(d,{open:!0,header:"MENU",footer:r.a.createElement("div",{onClick:function(){return l(!1)}},"CLOSE")},r.a.createElement("div",{className:"menu"},r.a.createElement("ul",null,Object.keys(p).map((function(e){return r.a.createElement("li",{key:e},r.a.createElement("span",{onClick:function(){return m(p[e])}},p[e]))})))))))},S=[{type:"red",score:1},{type:"green",score:2},{type:"blue",score:3},{type:"orange",score:4},{type:"gold",score:10},{type:"black",score:-5}];function j(){var e=Object(n.useRef)({gridSize:{},navPadSize:{},landscape:!1}),t=Object(n.useState)({}),a=Object(s.a)(t,2),c=a[0],l=a[1],d=Object(n.useState)([]),h=Object(s.a)(d,2),E=h[0],b=h[1],v=Object(n.useState)([{x:0,y:0}]),p=Object(s.a)(v,2),y=p[0],N=p[1],j=Object(n.useState)([]),C=Object(s.a)(j,2),x=C[0],B=C[1],A=Object(n.useState)("right"),z=Object(s.a)(A,2),L=z[0],M=z[1],I=Object(n.useState)([q()]),G=Object(s.a)(I,2),P=G[0],R=G[1],T=Object(n.useState)(0),U=Object(s.a)(T,2),V=U[0],W=U[1],K=Object(n.useState)(null),Y=Object(s.a)(K,2),$=(Y[0],Y[1]),D=Object(n.useState)(!1),F=Object(s.a)(D,2),J=F[0],H=F[1];Object(n.useEffect)((function(){var t=f.a.get("settings")||{};if(window.location.search&&!t.theme){var a=new URLSearchParams(window.location.search).get("theme");if(a){var n=Object.values(k).find((function(e){return e.key.toLowerCase()===a.toLowerCase()}));n&&(t.theme=n)}}function r(){var t=window.innerHeight-50,a=window.innerWidth-50;a<t?(e.current={landscape:!1,gridSize:{height:a+50,width:a}},e.current.navPadSize={height:t-e.current.gridSize.height,width:e.current.gridSize.width}):(e.current={landscape:!0,gridSize:{height:t,width:t-50}},e.current.navPadSize={height:e.current.gridSize.height,width:a-e.current.gridSize.width})}return l(t),r(),window.addEventListener("resize",r),function(){window.removeEventListener("resize",r)}}),[]);var Z=Object(n.useCallback)((function(e){var t=Object(i.a)(y),a=Object(o.a)({},t[t.length-1]),n={x:11,y:11};switch(e){case"right":a.x++,a.x=a.x>n.x?0:a.x;break;case"left":a.x--,a.x=a.x<0?n.x:a.x;break;case"up":a.y--,a.y=a.y<0?n.y:a.y;break;case"down":a.y++,a.y=a.y>n.y?0:a.y}if(t.some((function(e){return e.x===a.x&&e.y===a.y})))H(!0);else{var r=!0,c=Object(i.a)(P),l=Object(i.a)(x),s=c.findIndex((function(e){return e.x===a.x&&e.y===a.y}));if(s>-1){r=!1;var u=c[s];c.splice(s,1),l.push(u.type);var m=l.length,d=u.score;m>=3&&l[m-1]===l[m-2]&&l[m-2]===l[m-3]&&(d=Math.abs(d)+Math.abs(10*d),l.splice(m-3,3),t.splice(0,3)),W((function(e){return e+d}))}t.push(a),r&&t.shift(),B(l),R(c),N(t),function(t,a,n){for(var r=[],c=0;c<12;c++){for(var l=[],o=0;o<12;o++)l.push(null);r.push(l)}t.forEach((function(a,c){r[a.y][a.x]="snake ".concat(c===t.length-1?"head ".concat(e):n[c]||"")})),a.forEach((function(e){null===r[e.y][e.x]&&(r[e.y][e.x]="food ".concat(e.type))})),b(r)}(t,c,l)}}),[y,x,P]),_=Object(n.useCallback)((function(e){!J&&e&&e!==L&&("right"===e&&"left"!==L||"left"===e&&"right"!==L||"up"===e&&"down"!==L||"down"===e&&"up"!==L)&&(Z(e),M(e),$((function(e){return clearInterval(e),null})))}),[Z,L,J]);function q(){var e=Math.floor(12*Math.random()),t=Math.floor(12*Math.random()),a=S[Math.floor(Math.random()*S.length)];return Object(o.a)({x:e,y:t},a)}function Q(){N([{x:0,y:0}]),B([]),M("right"),W(0),$(null),H(!1)}return Object(n.useEffect)((function(){function e(e){_(37===e.keyCode?"left":38===e.keyCode?"up":39===e.keyCode?"right":40===e.keyCode?"down":null)}var t;return J||(t=setInterval((function(){Z(L)}),150),$(t),document.addEventListener("keydown",e)),function(){document.removeEventListener("keydown",e),clearInterval(t)}}),[L,Z,J,_]),Object(n.useEffect)((function(){var e;if(!J){e=setInterval((function(){R((function(e){if(e.length<7.2){for(var t=[],a=0;a<=1.44;a++){var n=q();if(t.push(n),e.length+t.length===7.2)break}return e.concat(t)}return e}))}),3e3)}return function(){clearInterval(e)}}),[J]),function(){var t=e.current,a=t.gridSize,n=t.landscape,o=t.navPadSize;return r.a.createElement("div",{className:"game "+(c.theme?c.theme.key:"")},c&&!c.userName&&r.a.createElement(w,{initialCheck:!0,settings:c,updateSettings:l}),J&&r.a.createElement(g,{score:V,userName:c.userName,playAgain:Q}),r.a.createElement("div",{className:"main",style:{width:a.width+"px",height:a.height+"px"}},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"left"},r.a.createElement(O,{settings:c,updateSettings:l})),r.a.createElement("div",{className:"center"},c.theme?c.theme.value:k.candySnake.value),r.a.createElement("div",{className:"right"},V)),r.a.createElement(u,{grid:E,showGridBorder:c.showGridBorder})),r.a.createElement(m,{onClick:_,width:o.width,height:o.height,landscape:n,vibration:c.vibration}))}()}l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.c51fc3a7.chunk.js.map